import{_ as s,a as e,a2 as n,o as p}from"./chunks/framework.DAlL-BGO.js";const u=JSON.parse('{"title":"","description":"","frontmatter":{"lastUpdated":"2023-12-18 22:22"},"headers":[],"relativePath":"pages/安装手册/Docker安装.md","filePath":"pages/安装手册/Docker安装.md","lastUpdated":1733806965000}'),t={name:"pages/安装手册/Docker安装.md"};function l(o,a,i,c,d,r){return p(),e("div",null,a[0]||(a[0]=[n(`<h2 id="一、系统环境" tabindex="-1">一、系统环境 <a class="header-anchor" href="#一、系统环境" aria-label="Permalink to &quot;一、系统环境&quot;">​</a></h2><p>Centos7</p><h2 id="二、安装" tabindex="-1">二、安装 <a class="header-anchor" href="#二、安装" aria-label="Permalink to &quot;二、安装&quot;">​</a></h2><p>安装DockerCE版本,<a href="https://docs.docker.com/install/linux/docker-ce/centos/" target="_blank" rel="noreferrer">官方教程</a></p><h3 id="_1、移除旧版本" tabindex="-1">1、移除旧版本 <a class="header-anchor" href="#_1、移除旧版本" aria-label="Permalink to &quot;1、移除旧版本&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ sudo yum remove docker \\</span></span>
<span class="line"><span>                  docker-client \\</span></span>
<span class="line"><span>                  docker-client-latest \\</span></span>
<span class="line"><span>                  docker-common \\</span></span>
<span class="line"><span>                  docker-latest \\</span></span>
<span class="line"><span>                  docker-latest-logrotate \\</span></span>
<span class="line"><span>                  docker-logrotate \\</span></span>
<span class="line"><span>                  docker-engine</span></span></code></pre></div><h3 id="_2、设置docker安装仓库" tabindex="-1">2、设置docker安装仓库 <a class="header-anchor" href="#_2、设置docker安装仓库" aria-label="Permalink to &quot;2、设置docker安装仓库&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ sudo yum install -y yum-utils \\</span></span>
<span class="line"><span>  device-mapper-persistent-data \\</span></span>
<span class="line"><span>  lvm2</span></span>
<span class="line"><span>$ sudo yum-config-manager \\</span></span>
<span class="line"><span>    --add-repo \\</span></span>
<span class="line"><span>    https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span></span>
<span class="line"><span>$ sudo sed -i &#39;s+download.docker.com+mirrors.aliyun.com/docker-ce+&#39; /etc/yum.repos.d/docker-ce.repo</span></span>
<span class="line"><span>$ sudo yum makecache</span></span></code></pre></div><h3 id="_3、安装" tabindex="-1">3、安装 <a class="header-anchor" href="#_3、安装" aria-label="Permalink to &quot;3、安装&quot;">​</a></h3><ul><li>安装默认版本</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ sudo yum install docker-ce</span></span></code></pre></div><ul><li>安装特定版本</li></ul><p>如果需要安装特定版本，按下面的方式执行。 先查看现有的版本</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ yum list docker-ce --showduplicates | sort -r</span></span></code></pre></div><p>显示如下</p><blockquote><p>docker-ce.x86_64 3:18.09.8-3.el7 docker-ce-stable docker-ce.x86_64 3:18.09.7-3.el7 docker-ce-stable ......</p></blockquote><p>安装18.09.8 版本</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ sudo yum install docker-ce-18.09.8 docker-ce-cli-18.09.8 containerd.io</span></span></code></pre></div><h3 id="_4、启动并设置" tabindex="-1">4、启动并设置 <a class="header-anchor" href="#_4、启动并设置" aria-label="Permalink to &quot;4、启动并设置&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ sudo systemctl start docker</span></span></code></pre></div><p>设置开机启动</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ sudo systemctl enable docker</span></span></code></pre></div><p>上面2条命令可以合并</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ sudo systemctl enable docker --now</span></span></code></pre></div><h3 id="_5、验证安装结果" tabindex="-1">5、验证安装结果 <a class="header-anchor" href="#_5、验证安装结果" aria-label="Permalink to &quot;5、验证安装结果&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ sudo docker run hello-world</span></span></code></pre></div><p>输出如下</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Hello from Docker!</span></span>
<span class="line"><span>This message shows that your installation appears to be working correctly.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>To generate this message, Docker took the following steps:</span></span>
<span class="line"><span> 1. The Docker client contacted the Docker daemon.</span></span>
<span class="line"><span> 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.</span></span>
<span class="line"><span>    (amd64)</span></span>
<span class="line"><span> 3. The Docker daemon created a new container from that image which runs the</span></span>
<span class="line"><span>    executable that produces the output you are currently reading.</span></span>
<span class="line"><span> 4. The Docker daemon streamed that output to the Docker client, which sent it</span></span>
<span class="line"><span>    to your terminal.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>To try something more ambitious, you can run an Ubuntu container with:</span></span>
<span class="line"><span> $ docker run -it ubuntu bash</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Share images, automate workflows, and more with a free Docker ID:</span></span>
<span class="line"><span> https://hub.docker.com/</span></span>
<span class="line"><span></span></span>
<span class="line"><span>For more examples and ideas, visit:</span></span>
<span class="line"><span> https://docs.docker.com/get-started/</span></span></code></pre></div><h2 id="三、修改国内镜像源" tabindex="-1">三、修改国内镜像源 <a class="header-anchor" href="#三、修改国内镜像源" aria-label="Permalink to &quot;三、修改国内镜像源&quot;">​</a></h2><p>修改文件 /etc/docker/daemon.json，文件不存在就添加一个。添加配置（2024年8月9号还能使用）</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>{</span></span>
<span class="line"><span>    &quot;registry-mirrors&quot;: [</span></span>
<span class="line"><span>      &quot;https://hub.uuuadc.top&quot;,</span></span>
<span class="line"><span>      &quot;https://docker.anyhub.us.kg&quot;,</span></span>
<span class="line"><span>      &quot;https://dockerhub.icu&quot;,</span></span>
<span class="line"><span>      &quot;https://docker.awsl9527.cn&quot;,</span></span>
<span class="line"><span>      &quot;https://docker.m.daocloud.io&quot;,</span></span>
<span class="line"><span>      &quot;https://docker.gs&quot;</span></span>
<span class="line"><span>    ]</span></span>
<span class="line"><span>}</span></span></code></pre></div><p>重载服务即可</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ sudo systemctl reload docker</span></span></code></pre></div><h2 id="四、卸载" tabindex="-1">四、卸载 <a class="header-anchor" href="#四、卸载" aria-label="Permalink to &quot;四、卸载&quot;">​</a></h2><ul><li>卸载</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ sudo yum remove docker-ce</span></span>
<span class="line"><span>$ sudo yum autoremove</span></span></code></pre></div><ul><li>删除目录</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>$ rm -rf /var/lib/docker</span></span></code></pre></div><p>删除 <code> /var/lib/docker</code>目录后，原先的镜像和容器都会被删除，请谨慎操作。如果只是为了更新，那么 <code> /var/lib/docker</code> 不需要删除。</p>`,39)]))}const k=s(t,[["render",l]]);export{u as __pageData,k as default};
