import{_ as a,a as n,a2 as i,o as e}from"./chunks/framework.DAlL-BGO.js";const r=JSON.parse('{"title":"数据盘分区并挂载目录","description":"","frontmatter":{"title":"数据盘分区并挂载目录","lastUpdated":"2024-12-03 15:43"},"headers":[],"relativePath":"install/disk-mount-unmout.md","filePath":"install/disk-mount-unmout.md","lastUpdated":1733806965000}'),p={name:"install/disk-mount-unmout.md"};function t(l,s,d,h,o,c){return e(),n("div",null,s[0]||(s[0]=[i(`<h3 id="_1-操作环境" tabindex="-1">1 操作环境 <a class="header-anchor" href="#_1-操作环境" aria-label="Permalink to &quot;1 操作环境&quot;">​</a></h3><p>阿里云购买的CentOS7</p><h3 id="_2-查看挂载情况" tabindex="-1">2 查看挂载情况 <a class="header-anchor" href="#_2-查看挂载情况" aria-label="Permalink to &quot;2 查看挂载情况&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> df</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -lh</span></span></code></pre></div><p>先查看具体的挂载情况， 例如当前显示的是 没有 挂载新的数据盘<code>/dev/vdb</code>的</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Filesystem      Size  Used Avail Use% Mounted on</span></span>
<span class="line"><span>/dev/vda1        99G   27G   67G  29% /</span></span>
<span class="line"><span>devtmpfs        909M     0  909M   0% /dev</span></span>
<span class="line"><span>tmpfs           920M     0  920M   0% /dev/shm</span></span>
<span class="line"><span>tmpfs           920M  484K  919M   1% /run</span></span>
<span class="line"><span>tmpfs           920M     0  920M   0% /sys/fs/cgroup</span></span>
<span class="line"><span>tmpfs           184M     0  184M   0% /run/user/0</span></span></code></pre></div><h3 id="_3-查看自己所有的硬盘" tabindex="-1">3 查看自己所有的硬盘 <a class="header-anchor" href="#_3-查看自己所有的硬盘" aria-label="Permalink to &quot;3 查看自己所有的硬盘&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fdisk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -l</span></span></code></pre></div><p>显示硬盘的信息</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Disk /dev/vda: 107.4 GB, 107374182400 bytes, 209715200 sectors</span></span>
<span class="line"><span>Units = sectors of 1 * 512 = 512 bytes</span></span>
<span class="line"><span>Sector size (logical/physical): 512 bytes / 512 bytes</span></span>
<span class="line"><span>I/O size (minimum/optimal): 512 bytes / 512 bytes</span></span>
<span class="line"><span>Disk label type: dos</span></span>
<span class="line"><span>Disk identifier: 0x0008d73a</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   Device Boot      Start         End      Blocks   Id  System</span></span>
<span class="line"><span>/dev/vda1   *        2048   209713151   104855552   83  Linux</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Disk /dev/vdb: 107.4 GB, 107374182400 bytes, 209715200 sectors</span></span>
<span class="line"><span>Units = sectors of 1 * 512 = 512 bytes</span></span>
<span class="line"><span>Sector size (logical/physical): 512 bytes / 512 bytes</span></span>
<span class="line"><span>I/O size (minimum/optimal): 512 bytes / 512 bytes</span></span></code></pre></div><p>或者直接查看单独一块硬盘</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fdisk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -l</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/vdb</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Disk /dev/vdb: 107.4 GB, 107374182400 bytes, 209715200 sectors</span></span>
<span class="line"><span>Units = sectors of 1 * 512 = 512 bytes</span></span>
<span class="line"><span>Sector size (logical/physical): 512 bytes / 512 bytes</span></span>
<span class="line"><span>I/O size (minimum/optimal): 512 bytes / 512 bytes</span></span></code></pre></div><p>这里可以看到硬盘 <code>/dev/vda</code> 已经创建了一个分区 <code>/dev/vda1</code>,磁盘 <code>/dev/vdb</code> 没有创建分区</p><h3 id="_4-创建分区" tabindex="-1">4 创建分区 <a class="header-anchor" href="#_4-创建分区" aria-label="Permalink to &quot;4 创建分区&quot;">​</a></h3><p>为磁盘 <code>/dev/vdb</code> 创建分区</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fdisk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/vdb</span></span></code></pre></div><p>输入 <code>m</code> 查看帮助,查用的选项如下</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Command action</span></span>
<span class="line"><span>   d   delete a partition （删除分区）</span></span>
<span class="line"><span>   n   add a new partition （添加分区）</span></span>
<span class="line"><span>   p   print the partition table （显示所有分区）</span></span>
<span class="line"><span>   q   quit without saving changes （退出不保存）</span></span>
<span class="line"><span>   w   write table to disk and exit （保存并退出）</span></span></code></pre></div><p>现在我们创建一个<code>50G</code>的主分区,依次的命令 :</p><blockquote><p>n（创建分区） -&gt; p（创建主分区）-&gt; 1 （分区需要1，生成&quot;/dev/vdb1&quot;分区）-&gt; 回车（使用默认值）-&gt; +50G （分区大小，需要确保剩余空间足够）</p></blockquote><p>将剩余空间全部生成分区2</p><blockquote><p>n（创建分区） -&gt; p（创建主分区） -&gt; 2 （分区需要2，生成&quot;/dev/vdb2&quot;分区）-&gt; 回车（使用默认值）-&gt; 回车（使用默认值）\`</p></blockquote><p>最后按 <code>w</code> 命令保存并退出</p><p>查看已完成分区的磁盘</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fdisk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -l</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/vdb</span></span></code></pre></div><p>可以看到已经存在分区 <code>/dev/vdb1</code> 和 <code>/dev/vdb2</code>，显示如下</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Disk /dev/vdb: 107.4 GB, 107374182400 bytes, 209715200 sectors</span></span>
<span class="line"><span>Units = sectors of 1 * 512 = 512 bytes</span></span>
<span class="line"><span>Sector size (logical/physical): 512 bytes / 512 bytes</span></span>
<span class="line"><span>I/O size (minimum/optimal): 512 bytes / 512 bytes</span></span>
<span class="line"><span>Disk label type: dos</span></span>
<span class="line"><span>Disk identifier: 0x22c9b721</span></span>
<span class="line"><span></span></span>
<span class="line"><span>   Device Boot      Start         End      Blocks   Id  System</span></span>
<span class="line"><span>/dev/vdb1            2048   104859647    52428800   83  Linux</span></span>
<span class="line"><span>/dev/vdb2       104859648   209715199    52427776   83  Linux</span></span></code></pre></div><h3 id="_5-格式化新分区" tabindex="-1">5 格式化新分区 <a class="header-anchor" href="#_5-格式化新分区" aria-label="Permalink to &quot;5 格式化新分区&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mkfs.ext4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/vdb1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mkfs.ext4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/vdb2</span></span></code></pre></div><p>没有格式化挂载会出现错误提示</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>mount: /dev/vdb1 is write-protected, mounting read-only</span></span>
<span class="line"><span>mount: unknown filesystem type &#39;(null)</span></span></code></pre></div><h3 id="_6-挂载磁盘" tabindex="-1">6 挂载磁盘 <a class="header-anchor" href="#_6-挂载磁盘" aria-label="Permalink to &quot;6 挂载磁盘&quot;">​</a></h3><p>添加目录并挂载对应的分区</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  /mnt/d/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt/e</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mount</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/vdb1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt/d</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mount</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/vdb2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /mnt/e</span></span></code></pre></div><h3 id="_7-取消挂载" tabindex="-1">7 取消挂载 <a class="header-anchor" href="#_7-取消挂载" aria-label="Permalink to &quot;7 取消挂载&quot;">​</a></h3><p>如果不想用该分区可以将它卸载</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> umount</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /dev/vdb1</span></span></code></pre></div><h3 id="_8-设置开机自动挂载" tabindex="-1">8 设置开机自动挂载 <a class="header-anchor" href="#_8-设置开机自动挂载" aria-label="Permalink to &quot;8 设置开机自动挂载&quot;">​</a></h3><p>查看磁盘UUID</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> blkid</span></span></code></pre></div><p>显示如下</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>/dev/vda1: UUID=&quot;ac95c595-4813-480e-992b-85b1347842e8&quot; TYPE=&quot;ext4&quot; </span></span>
<span class="line"><span>/dev/vdb1: UUID=&quot;7f9b97e9-fae1-47ca-bc19-acdfb027368a&quot; TYPE=&quot;ext4&quot;</span></span></code></pre></div><p>设置开机挂载 <code>/dev/vdb1</code>到 <code>/mnt/d</code>，修改配置文件 <code>/etc/fstab</code>，末尾添加一行如下</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>UUID=7f9b97e9-fae1-47ca-bc19-acdfb027368a /mnt/d ext4 defaults 0 0</span></span></code></pre></div><p>参数解释：</p><ul><li>UUID=7f9b97e9-fae1-47ca-bc19-acdfb027368a：要挂载的磁盘分区的UUID</li><li>/mnt/d：挂载目录</li><li>ext4：分区格式为ext4</li><li>defaults：挂载时所要设定的参数(只读，读写，启用quota等)，输入defaults包括的参数有(rw、dev、exec、auto、nouser、async)</li><li>0：使用dump是否要记录，0为不需要，1为需要</li><li>0：开机时检查的顺序。0代表不检查，1是boot系统文件，2是其他文件系统</li></ul>`,47)]))}const b=a(p,[["render",t]]);export{r as __pageData,b as default};
